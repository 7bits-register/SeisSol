stages:
    - build

build_sing:
    stage: build
    tags:
        - atsccs68-shell
    before_script:
        - git branch -vva
        - git log --format="%H" -n 1
        - git log --format="%H" -n 1 > commit_id
        - git --no-pager show -s --format='%ae' $commit_id
        - commit_author_name=$(git --no-pager show -s --format='%ae' $commit_id) 
        - echo $commit_author_name
    script:
        - whoami
        - pwd
        - ls
        - cat /etc/os-release
        - cat test_singularity.sh
        - chmod +x test_singularity.sh
        - which singularity 
        - singularity --version
        - singularity pull --arch arm64 library://7bits-register/collection/seissol-base.sif:ubuntu-18.04_aarch64_gcc-8.3.0_openmpi-3.1.5_cuda-11.0.2
        - ls
        #singularity run --nv -B $PWD:/home/$(whoami) --env GPU_VENDOR=nvidia --env GPU_MODEL=sm_61 --env HOST=snb ./seissol--base.sif:ubuntu-18.04_aarch64_gcc-8.3.0_openmpi-3.1.5_cuda-11.0.2 ./test_singularity.sh
